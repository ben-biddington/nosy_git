#!/usr/bin/ruby

the_file = ARGV[0]

require File.join File.dirname(__FILE__), "..", "lib", "nosy_git"
require "fileutils"

puts "(#{FileUtils.pwd})"
puts "Analyzing <#{the_file}>"

revisions = Revisions.for the_file

begin
  revisions.each do |rev|
    the_number_of_lines = Lines.for the_file, rev.number
    puts "#{rev.timestamp} #{rev.number}, lines: #{the_number_of_lines}, message: #{rev.message[0,50]}"
  end
ensure
  Revisions.head the_file
end
